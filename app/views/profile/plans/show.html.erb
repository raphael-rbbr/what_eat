<div class="profile-container">

  <h3>Página Plan-Show</h3>

  <%=link_to "home", root_path%>

  <%=link_to "Groceries List", profile_groceries_list_path(@user)%>

  <div class="meals-cards">

    <div class="timetable-card">
      <%# incluir forma de puxar apenas os dados do plano atual pela data " , locals: { plan:  } " %>
      <%# <%= raise %>
      <%= render "timetable" %>
    </div>

    <div>
      <h3><strong> Selected Meals for You! </strong></h3>
    </div>

    <div class="recipe-cards-container" data-controller="drag-item" data-drag-item-target="recipeCardContainer">
      <% @user.recipes.each do |recipe| %>
        <div  class="list-group-item"

              <%# hooks para criar meal %>
              id="<%= recipe.id %>"
              data-drag-item-target="recipe"

              <%# hooks para modal-details %>
              data-controller="meal-card"
              data-meal-card-target="recipe"

              <%# understand why it just work if I click on details first %>
              data-toggle="modal"
              data-target="#modal-xl<%=recipe.id%>"
              data-action="meal-card#click">

          <%= cl_image_tag recipe.recipe_photo.key, class:"meal-img" %>
          <div class="meal-card-text">
            <h4><strong><%= recipe.title %> • <%= recipe.servings %><i class="bi bi-people-fill"></i></strong></h4>

            <%# btn details - I want to kill it and transform all card clickable %>
            <div  class="link-card"
                  data-toggle="modal"
                  data-target="#modal-xl<%=recipe.id%>">
              <button data-action="meal-card#click">Details</button>
            </div>
          </div>
        </div>

        <%# modal of recipe %>
        <div  class="modal fade modal-xl"
              data-controller="modal"
              data-action="meal-card:click@window->modal#open"
              id="modal-xl<%=recipe.id%>" tabindex="-1" role="dialog" aria-labelledby="modal-xl<%=recipe.id%>Title" aria-hidden="true">
          <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="modal-xl<%=recipe.id%>Title"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <%# replace the html woth the partial _recipe of the recipe id chosen %>
              <div  class="modal-body">
                <div id="recipe<%=recipe.id%>">
                </div>
              </div>
            </div>
          </div>
        </div>

      <% end %>
    </div>
  </div>

</div>

<%# <%= render partial: "show", locals: {recipe: Recipe.find_by(title: "Green Lemonade")}%> %>
